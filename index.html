<!DOCTYPE html>
<html>
<head>
<script>
<!-- DKTX Read function -->

function fcn_ENOn()
{
	var xhr = new XMLHttpRequest();
	xhr.open("GET", "http://api.thingspeak.com/update?key=CC6LNKOFMU583XMM&field4=1");
	xhr.onload = function() {
		var xhr2 = new XMLHttpRequest();
		xhr2.open("GET", "https://thingspeak.com/channels/116306/fields/4/last");
		xhr2.onload = function() { document.getElementById("EN_display").innerHTML=this.responseText; }
		xhr2.send();
	}
	xhr.send();  
}
function fcn_ENoff()
{
	var xhr = new XMLHttpRequest();
	xhr.open("GET", "http://api.thingspeak.com/update?key=CC6LNKOFMU583XMM&field4=0");
	xhr.onload = function() {
		var xhr2 = new XMLHttpRequest();
		xhr2.open("GET", "https://thingspeak.com/channels/116306/fields/4/last");
		xhr2.onload = function() { document.getElementById("EN_display").innerHTML=this.responseText; }
		xhr2.send();
	}
	xhr.send();  
}


function EN_periodic() {
	var xmlHttp;
	xmlHttp=new XMLHttpRequest();
	xmlHttp.onreadystatechange=function(){		
		if(xmlHttp.readyState==4){
			document.getElementById('EN_display').innerHTML=xmlHttp.responseText;
		}
	}	
	
	xmlHttp.open("GET","https://thingspeak.com/channels/116306/fields/4/last",true);
	xmlHttp.send(null);
}

<!-- SENSOR Read function -->
function fcn_T_display()
{
	var xhr = new XMLHttpRequest();
	xhr.open("GET", "https://thingspeak.com/channels/103193/fields/1/last");
	xhr.onload = function() { document.getElementById("LM35").innerHTML=this.responseText; }
	xhr.send();  
}
function T_periodic() {
	var xmlHttp;
	xmlHttp=new XMLHttpRequest();
	xmlHttp.onreadystatechange=function(){		
		if(xmlHttp.readyState==4){
			var short=parseFloat(xmlHttp.responseText).toFixed(2);
			document.getElementById('LM35').innerHTML=short;
		}
	}
	xmlHttp.open("GET","https://thingspeak.com/channels/103193/fields/1/last",true);
	xmlHttp.send(null);
}

function fcn_H_display()
{
	var xhr = new XMLHttpRequest();
	xhr.open("GET", "https://thingspeak.com/channels/103193/fields/2/last");
	xhr.onload = function() { document.getElementById("DOAM").innerHTML=this.responseText; }
	xhr.send();  
}
function H_periodic() {
	var xmlHttp;
	xmlHttp=new XMLHttpRequest();
	xmlHttp.onreadystatechange=function(){		
		if(xmlHttp.readyState==4){
			var short=parseFloat(xmlHttp.responseText).toFixed(2);
			document.getElementById('DOAM').innerHTML=short;
		}
	}
	xmlHttp.open("GET","https://thingspeak.com/channels/103193/fields/2/last",true);
	xmlHttp.send(null);
}

function fcn_LUX_display()
{
	var xhr = new XMLHttpRequest();
	xhr.open("GET", "https://thingspeak.com/channels/103193/fields/3/last");
	xhr.onload = function() { document.getElementById("ANHSANG").innerHTML=this.responseText; }
	xhr.send();  
}
function LUX_periodic() {
	var xmlHttp;
	xmlHttp=new XMLHttpRequest();
	xmlHttp.onreadystatechange=function(){		
		if(xmlHttp.readyState==4){
			var short=parseFloat(xmlHttp.responseText).toFixed(2);
			document.getElementById('ANHSANG').innerHTML=short;
		}
	}
	xmlHttp.open("GET","https://thingspeak.com/channels/103193/fields/3/last",true);
	xmlHttp.send(null);
}

<!-- SET SENSOR -->
function fcn_Sensor1()
{
	var xhr = new XMLHttpRequest();
	var str1 = "http://api.thingspeak.com/update?key=CC6LNKOFMU583XMM&field1=";
	var str2 = document.getElementById('NHIET_DO').value;
	var str = str1.concat(str2);
	xhr.open("GET", str);
	xhr.send();  
}
function fcn_Sensor2()
{
	var xhr = new XMLHttpRequest();
	var str1 = "http://api.thingspeak.com/update?key=CC6LNKOFMU583XMM&field2=";
	var str2 = document.getElementById('DO_AM_SET').value;
	var str = str1.concat(str2);
	xhr.open("GET", str);
	xhr.send();  
}
function fcn_Sensor3()
{
	var xhr = new XMLHttpRequest();
	var str1 = "http://api.thingspeak.com/update?key=CC6LNKOFMU583XMM&field3=";
	var str2 = document.getElementById('LUX_SET').value;
	var str = str1.concat(str2);
	xhr.open("GET", str);
	xhr.send();  
}


window.onload=function(){
	setInterval('EN_periodic()',500);
	setInterval('ledtoggle_periodic()',500);
	setInterval('T_periodic()',500);
	setInterval('H_periodic()',500);
	setInterval('LUX_periodic()',500);
	setInterval('pwm_duty_periodic()',500);
	
}
</script>
</head>

<body>
<!-- DKTX Toggle  -->
<fieldset><legend>EN Read</legend><button onclick="fcn_ENOn()">ON</button> <button onclick="fcn_ENoff()">OFF</button> [<b id="EN_display">x</b>] </fieldset>
<!-- SENSOR Display -->
<fieldset><legend>SENSOR Read </legend>
<button onclick="fcn_T_display()">Update</button> <b id="LM35">0.00</b> *C 

<button onclick="fcn_H_display()">Update</button> <b id="DOAM">0.00</b> % 

<button onclick="fcn_LUX_display()">Update</button> <b id="ANHSANG">0.00</b> Lux 
</fieldset>

<!-- LCD Demo -->
<fieldset><legend>SET SENSOR</legend>
Line1: <input type="text" id="NHIET_DO" value="SET-NHIET-DO"><button onclick="fcn_Sensor1()">Set</button><br>
Line2: <input type="text" id="DO_AM_SET" value="SET-DO-AM"><button onclick="fcn_Sensor2()">Set</button><br>
Line3: <input type="text" id="LUX_SET" value="SET-ANH-SANG"><button onclick="fcn_Sensor3()">Set</button><br>
</fieldset>


<p><a href="/">home</a>

</body>
</html>
